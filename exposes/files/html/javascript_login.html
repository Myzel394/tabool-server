<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <met
                http-equiv="Content-Security-Policy"
                content="default-src * 'self' 'unsafe-inline' 'unsafe-eval' data: gap: content:"
        >

            <!-- prevent scaling -->
            <meta
                    name="viewport"
                    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no,  viewport-fit=cover"
            >

            <!-- prevent caching -->
            <META HTTP-EQUIV="CACHE-CONTROL" CONTENT="NO-CACHE">
            <META HTTP-EQUIV="PRAGMA" CONTENT="NO-CACHE">

            <meta name="format-detection" content="telephone=no">
            <meta name="msapplication-tap-highlight" content="no">

            <!-- ****************************************************************************************** -->
            <!-- APPLE Stuff -->
            <!-- ****************************************************************************************** -->

            <meta name="apple-mobile-web-app-capable" content="yes">
            <meta name="apple-mobile-web-app-status-bar-style" content="default">
            <!-- styling of status bar (default, black or black-translucent) -->
            <meta name="apple-mobile-web-app-status-bar-style" content="black">
            <!-- Icon fuer Home Screen -->
            <!-- TODO: http://iconifier.net/ -->

            <!-- switch off elastic scrolling
                To realize in native app!
                TODO:	// https://davidjhinson.wordpress.com/2010/11/13/stop-the-bouncy-uiwebviews/
            -->

            <title>Scooso</title>

            <link rel="stylesheet" href="../ext/js/framework7/framework7.min.css">
            <link rel="stylesheet" href="../ext/js/framework7/framework7.bundle.min.css">
            <link rel="stylesheet" href="../ext/js/jspanel/jspanel.min.css">
            <link rel="stylesheet" href="../css/scooso.css.php?col=2b8d95">

            <!-- TODO -->

            </head>
    <body class="color-heme-green ">
        <span style="display:none" class=scPresenter id="scPresenter" style="z-index:100000;"></span>
        <div style="display:none" id="scErrorConsole">err</div>
        <div style="display:none" id="scSetAppCommand"></div>
        <div style="display:none" id="scDeviceToken"></div>
        <div style="display:none" id="scAppSettings">{"waitForApp":false,"platform":0}</div>
        <div style="display:none" id="scMessagesFromApp">M</div>
        <div style="display:none" id="scCommandFromApp"></div>

        <div id="app">
            <!-- Status bar overlay for fullscreen mode-->
            <div class="statusbar"></div>

            <!-- Left panel with cover effect as main menu-->

            <div class="panel panel-left panel-cover">
                <div class="view">
                    <div class="page" id="scMainMenuPage">
                        <div class="navbar">
                            <div class="navbar-inner">
                                <div class="title"></div>
                            </div>
                        </div>
                        <div class="page-content" id="scMainMenuContent">
                        </div>
                    </div>
                </div>
            </div>
            <!-- only one view for whole app -->

            <!-- Tabs container -->
            <div class="views tabs ios-edges">

                <!-- Tabbar for switching tabs -->
                <div class="toolbar tabbar-labels toolbar-bottom ">
                    <div class="toolbar-inner">
                        <a href="#view-home" class="tab-link tab-link-active" onclick="ScCore.goHome()">
                            <i class="icon f7-icons">house</i>
                            <span class="tabbar-label"></span>
                        </a></div>
                </div>
                <!-- Your main view/tab, should have "view-main" class. It also has "tab-active" class -->
                <div id="view-home" class="view view-main tab tab-active">
                    <!-- Page, data-name contains page name which can be used in page callbacks -->
                    <div class="page" data-name="home">
                        <!-- Top Navbar -->

                        <div class="navbar">
                            <div class="navbar-inner">


                                <div class="left">
                                    <a href="#" class="link icon-only panel-open" data-panel="left">
                                        <i class="icon f7-icons">bars</i>
                                    </a>
                                </div>

                                <div class="title sliding" id="scWebAppName">Scooso</div>
                                <!--
                                <div class="right">
                                  <a href="#" class="link icon-only panel-open" data-panel="right">
                                      <i class="icon f7-icons">menu</i>
                                  </a>
                                </div>
                                -->
                            </div>
                        </div>
                        <!-- Scrollable page content-->
                        <div class="page-content" id="scHomePageContent">
                            <div style="height:90%;width:100%;display:table">
                                <!-- <div style="height:90%;width:100%;display:table"> -->
                                <div class="scCenterParent">
                                    <!-- <img class="scCenter" src='../../scooso/data/pics/clients/logo/3258a824ec6a60a321487a97e0b05cfd.png' /> -->


                                </div>
                            </div>
                        </div>
                    </div>
                </div>


                <!-- Settings View -->
                <!--
                <div id="view-settings" class="view tab">
                  <div class="page" data-name="home">
                    <div class="navbar">
                      <div class="navbar-inner">
                        <div class="left" style="visibility: hidden;">
                          <a href="#" class="link icon-only panel-open" data-panel="left">
                              <i class="icon f7-icons">menu</i>
                          </a>
                        </div>
                        <div class="title sliding" >Scooso</div>
                      </div>
                    </div>

                    <div class="page-content" id="scSettingsPageContent">
                      <div class="block block-strong">
                          Settings
                      </div>
                    </div>
                  </div>
                </div>
                -->
            </div>


        </div>
        <script>
            // direct js errors to server
            window.onerror = function (msg, url, lineNo, columnNo, error) {
                // TODO: send to server!
                //controller.sendLog({acc:'error', data:'ERR:'+error+' URL:'+url+' L:'+line});
                if (scGlobals.user.id == 1) {//TODO!!!!
                    ScCore.alert(error.stack)
                }
                document.getElementById("scErrorConsole").innerHTML += msg + "<br>" + url + "<br>" + lineNo + "<br>"
            };

            // use this for click events
            let scTouchEvent = 'ontouchstart' in window ? 'touchstart' : 'click';

            // presenter
            /*
            document.addEventListener ("click", function (eve) {
               let posx = eve.clientX-4;
               let posy = eve.clientY-28;

                    $("#scPresenter").hide()

                let d = document.getElementById('scPresenter');
                d.style.position = "absolute";
                d.style.left = posx+'px';
                d.style.top = posy+'px';

                $("#scPresenter").fadeIn(100)
                setTimeout(function(){$("#scPresenter").fadeOut(100)},300)



                //eve.preventDefault();
            });
            */

            var supportsES6 = function () {
                try {
                    new Function("(a = 0) => a");
                    return true;
                } catch (err) {
                    return false;
                }
            }
            if (!supportsES6()) {
                document.write('<div style="padding:8px;font-size:18px;display: inline-block;position: fixed;top: 0;bottom: 0;left: 0;right: 0;width: 400px;height: 200px;margin: auto;background-color: #f3f3f3;-webkit-box-shadow: 4px 4px 10px 0px rgba(128,128,128,1);-moz-box-shadow: 4px 4px 10px 0px rgba(128,128,128,1);box-shadow: 4px 4px 10px 0px rgba(128,128,128,1);">Ihr Betriebssystem wird leider nicht von Scooso unterstützt. <br><br>Führen Sie ein Update Ihres Betriebssystems durch, um Scooso zu nutzen.</div>');

            }
            var deviceDetector = function () {
                var b = navigator.userAgent.toLowerCase(), a = function (a) {
                    void 0 !== a && (b = a.toLowerCase());
                    return /(ipad|tablet|(android(?!.*mobile))|(windows(?!.*phone)(.*touch))|kindle|playbook|silk|(puffin(?!.*(IP|AP|WP))))/.test(b) ? "tablet" : /(mobi|ipod|phone|blackberry|opera mini|fennec|minimo|symbian|psp|nintendo ds|archos|skyfire|puffin|blazer|bolt|gobrowser|iris|maemo|semc|teashark|uzard)/.test(b) ? "phone" : "desktop"
                };
                return {device: a(), detect: a, isMobile: "desktop" != a() ? !0 : !1, userAgent: b}
            }();

            // reload page, when orientation has changed
        </script>

        <!-- jQuery -->
        <script src="../ext/js/jquery/jquery.min.js"></script>

        <!-- Framework7 library -->
        <script src="../ext/js/framework7/framework7.min.js"></script>
        <script src="../ext/js/framework7/framework7.bundle.min.js"></script>

        <!-- jpanel -->
        <script src="../ext/js/jspanel/jspanel.min.js"></script>
        <script src="../ext/js/jspanel/extensions/contextmenu/jspanel.contextmenu.min.js"></script>


        <!-- define several variables -->
        <script>

            var scGlobals = {
                start: {
                    action: 0
                },
                system: {
                    modalTitle: "", // Scooso
                    modalButtonOk: "OK",
                    modalButtonCancel: "Abbrechen",
                    dialogTitle: "SCOOSO",//"Scooso",	//this is just default
                    version: 6,
                    idCounter: 0,
                    loginRunning: false,
                    localhost: 0
                },
                client: {
                    anonymousLevel: 1,		// 0: not anonym, 1: usernames, 10: strictly anonym
                    minUsernameLength: 6,
                    number: 220,
                    minPasswordLength: 8,
                    name: "scooso",
                    fullname: "scooso",
                    logo: '../data/pics/clients/logo/3aa9f781e00c93fb4fe7d56e04a3518f.png',
                    loginScreen: {},
                    keepClientNameInNavbar: 1,
                    personTypes: {
                        n: {
                            "15": "Administrator",
                            "20": "Sch\u00fcler",
                            "21": "Lehrer",
                            "22": "Erziehungsberechtigter",
                            "23": "Ehemaliger Sch\u00fcler",
                            "24": "Ehemaliger Lehrer",
                            "25": "Ehemaliger Erziehungsberechtigter",
                            "26": "Dienst",
                            "90": "Gast",
                            "100": "Firma"
                        },
                        f: {
                            "15": "Administratorin",
                            "20": "Sch\u00fclerin",
                            "21": "Lehrerin",
                            "22": "Erziehungsberechtigte",
                            "23": "Ehemalige Sch\u00fclerin",
                            "24": "Ehemalige Lehrerin",
                            "25": "Ehemalige Erziehungsberechtigte",
                            "26": "Dienst",
                            "90": "Gast",
                            "100": "Firma"
                        },
                        p: {
                            "15": "Administratoren",
                            "20": "Sch\u00fcler",
                            "21": "Lehrer",
                            "22": "Erziehungsberechtigte",
                            "23": "Ehemalige Sch\u00fcler",
                            "24": "Ehemalige Lehrer",
                            "25": "Ehemalige Erziehungsberechtigte",
                            "26": "Dienste",
                            "90": "G\u00e4ste",
                            "100": "Firmen"
                        },
                        s: {
                            "15": "AD",
                            "20": "SC",
                            "21": "LH",
                            "22": "EB",
                            "23": "ES",
                            "24": "EL",
                            "25": "EE",
                            "26": "DI",
                            "90": "GS",
                            "100": "FI"
                        },
                        default: 20
                    },
                    formExpireTime: 90
                },
                localization: {
                    dateFormat: 'dd.mm.yyyy'
                },
                connection: {
                    authString: 'client=scooso&logSessionId=&logUserIe=',
                    path2Modules: "../js/v6min/",
                    path2ExternJS: "../ext/js/",

                    ajaxType: "POST",
                    path2PHP: "../../scooso/bin/php/",
                    timeout: 30000,
                    //postMaxSize: 16777216,
                    postMaxSize: 16 * 1024 * 1024,
                    maxImgWidth: 1440
                },
                device: {
                    isTouch: (('ontouchstart' in window) || (navigator.msMaxTouchPoints > 0) || (navigator.maxTouchPoints > 0)),
                    isWebApp: ('standalone' in window.navigator) && window.navigator.standalone,
                    type: deviceDetector.device		// desktop, tablet, phone
                    //type: 'phone'
                },
                layout: {
                    colors: {
                        error: 'ff0000',
                        main: "2b8d95"
                    },
                    theme_f7: 'ios',
                    //theme_f7:'auto',
                    mainContentDiv: 'scHomePageContent',
                    panelWidth: 450,
                    panelMargin: 8,
                    showMenu: true,
                    showTabbar: true,
                    showNavbar: true,
                    contextMenuIconSize: 20
                },
                externScripts: {
                    // TODO: get from db
                    pdf: {
                        file: "jspdf/jspdf.min.js"
                    },
                    pdfjs: {
                        file: "pdfjs/pdf.min.js"
                    },
                    xlsx: {
                        file: "xlsx/xlsx.min.js"
                    },
                    datatables: {
                        file: "",
                        css: ""
                    },
                    fabric: {
                        file: "fabric/fabric.min.js"
                    },

                    filesaver: {
                        file: "filesaver/filesaver.min.js"
                    },

                    fullcalendar: {
                        file: "fullcalendar/fullcalendar.min.js",
                        css: "fullcalendar/fullcalendar.css"
                    },
                    encryption: {
                        file: "encryption/encryption.min.js",
                    },
                    dropzone: {
                        file: "dropzone/dropzone.min.js",
                        css: "dropzone/dropzone.min.css"
                    },
                    qrcode: {
                        file: "qrcode/qrcode.min.js"
                    },
                    webaudiotrack: {
                        file: "webaudiotrack/webaudiotrack.js"
                    }
                },
                user: {
                    lang: "DE",
                    langExt: "de-DE",
                    id: 0,
                    username: "",
                    /*
                                        name:		"",
                                        prename:	"",
                                        maingroup:	"",
                                        maingroup_s:"",
                    */
                    name: "",
                    prename: "",
                    maingroup: "",
                    maingroup_s: "",
                    type: 90

                },
                externApp: {
                    loginProcedureRunning: false
                },
                anonymous: {
                    personMemorySet: false,
                    personMemory: {}
                }
            };

            PDFJSWORKER = "../ext/js/pdfjs/pdf.worker.js"
        </script>

        <!-- scooso core class and lang file -->
        <script src="../js/v6min/SCCORE/lang/DE.js?1601472413"></script>
        <script src="../js/v6min/SCCORE/ScCore.js?1601472413"></script>

        <!-- scooso initialization and start -->
        <script src="../js/v6min/init.js?1601472413"></script>

        <!-- Basic page template for usual queries -->
        <template id="scBasicPageTemplate">
            <div class="page" id="{{ scId }}" scType="dialog">
                <div class="navbar">
                    <div class="navbar-bg"></div>
                    <div class="navbar-inner sliding">
                        <div class="left">
                            <a href="#" class="link back">
                                <i class="icon icon-back"></i>
                                <span class="ios-only">Zurück</span>
                            </a>
                        </div>
                        <div class="title">{{ title }}</div>
                        <!--
					<div class="subnavbar scDisplayNone" >

						<form class="searchbar " id="{{scId}}_searchbar">
							<div class="searchbar-inner">
								<div class="searchbar-input-wrap">
									<input type="search" placeholder="">
									<i class="searchbar-icon"></i>
									<span class="input-clear-button"></span>
								</div>
								<span class="searchbar-disable-button if-not--aurora">Abbrechen</span>
							</div>
						</form>
					</div>
-->
                        <div class="right ">
                            <a href="#" class="link icon-only panel-open " data-panel="right">
                                <i class="icon f7-icons scContextMenuPhone" id="{{ scId }}_cmenu" style="display:none">bars</i>
                            </a>
                        </div>
                    </div>
                </div>
                <div class="list-index" id="{{ scId }}_listIndex"></div>
                <div class="page-content" id="{{ scContentId }}">
                </div>
            </div>
        </template>

    </body>
</html>
