(this["webpackJsonptabool-website"]=this["webpackJsonptabool-website"]||[]).push([[7],{1049:function(e,t,n){"use strict";var a=n(10),i=n(28),o=n(3),r=n(1),c=(n(6),n(7)),s=n(14),l=n(1008),d=r.forwardRef((function(e,t){var n,i=e.classes,s=e.className,d=e.component,j=void 0===d?"li":d,u=e.disableGutters,b=void 0!==u&&u,h=e.ListItemClasses,O=e.role,m=void 0===O?"menuitem":O,v=e.selected,f=e.tabIndex,p=Object(a.a)(e,["classes","className","component","disableGutters","ListItemClasses","role","selected","tabIndex"]);return e.disabled||(n=void 0!==f?f:-1),r.createElement(l.a,Object(o.a)({button:!0,role:m,tabIndex:n,component:j,selected:v,disableGutters:b,classes:Object(o.a)({dense:i.dense},h),className:Object(c.a)(i.root,s,v&&i.selected,!b&&i.gutters),ref:t},p))}));t.a=Object(s.a)((function(e){return{root:Object(o.a)({},e.typography.body1,Object(i.a)({minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",width:"auto",overflow:"hidden",whiteSpace:"nowrap"},e.breakpoints.up("sm"),{minHeight:"auto"})),gutters:{},selected:{},dense:Object(o.a)({},e.typography.body2,{minHeight:"auto"})}}),{name:"MuiMenuItem"})(d)},1052:function(e,t,n){"use strict";var a=n(3),i=n(10),o=n(1),r=n(7),c=(n(6),n(24)),s=n(14),l=o.forwardRef((function(e,t){var n=e.animation,c=void 0===n?"pulse":n,s=e.classes,l=e.className,d=e.component,j=void 0===d?"span":d,u=e.height,b=e.variant,h=void 0===b?"text":b,O=e.width,m=Object(i.a)(e,["animation","classes","className","component","height","variant","width"]),v=Boolean(m.children);return o.createElement(j,Object(a.a)({ref:t,className:Object(r.a)(s.root,s[h],l,v&&[s.withChildren,!O&&s.fitContent,!u&&s.heightAuto],!1!==c&&s[c])},m,{style:Object(a.a)({width:O,height:u},m.style)}))}));t.a=Object(s.a)((function(e){return{root:{display:"block",backgroundColor:Object(c.c)(e.palette.text.primary,"light"===e.palette.type?.11:.13),height:"1.2em"},text:{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 60%",transform:"scale(1, 0.60)",borderRadius:e.shape.borderRadius,"&:empty:before":{content:'"\\00a0"'}},rect:{},circle:{borderRadius:"50%"},pulse:{animation:"$pulse 1.5s ease-in-out 0.5s infinite"},"@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.4},"100%":{opacity:1}},wave:{position:"relative",overflow:"hidden","&::after":{animation:"$wave 1.6s linear 0.5s infinite",background:"linear-gradient(90deg, transparent, ".concat(e.palette.action.hover,", transparent)"),content:'""',position:"absolute",transform:"translateX(-100%)",bottom:0,left:0,right:0,top:0}},"@keyframes wave":{"0%":{transform:"translateX(-100%)"},"60%":{transform:"translateX(100%)"},"100%":{transform:"translateX(100%)"}},withChildren:{"& > *":{visibility:"hidden"}},fitContent:{maxWidth:"fit-content"},heightAuto:{height:"auto"}}}),{name:"MuiSkeleton"})(l)},1053:function(e,t,n){e.exports={wrapper:"EventEvent_wrapper__1Jzkv"}},1054:function(e,t,n){e.exports={wrapper:"Modification_wrapper__3Aq4n"}},1055:function(e,t,n){e.exports={wrapper:"LessonEvent_wrapper__bxCbb",isModificationAvailable:"LessonEvent_isModificationAvailable__812_D",isReplacement:"LessonEvent_isReplacement__2xrqx"}},1089:function(e,t,n){"use strict";n.r(t);var a=n(2),i=n(12),o=n(4),r=n(1),c=n(27),s=n.n(c),l=n(15),d=n(372),j=n(64),u=n(1001),b=n(20),h=n(40),O=n(948),m=n(11),v=Object(r.createContext)({}),f=n(93),p=n(33),x=n(267),g=(n(527),n(14)),w=n(61),y=n(1011),D=n(230),C=n(951),k=n(1002),S=n(953),T=n(516),_=n(954),A=n(361),P=n(305),N=n(321),F=function(e){var t=e.label,n=e.onNavigate,i=Object(p.a)(e,["label","onNavigate"]),c=Object(r.useContext)(v),s=c.earliestDateAvailable,l=c.latestDateAvailable,d=c.date,u=c.onDateChange,b=c.activeView,h=Object(O.a)().t,m="day"===b,f=h("Es gibt f\xfcr diesen Zeitraum noch keine Daten").toString(),x=s&&!d.subtract(6,"day").isAfter(s),g=l&&!d.add(6,"day").isBefore(l),y=m?s&&!d.isAfter(s):x,C=m?l&&!d.isBefore(l):g;return Object(a.jsxs)(T.a,{flexDirection:"row",display:"flex",justifyContent:"center",children:[j.isMobile&&m&&Object(a.jsx)(w.V,{title:x?f:h("Springe eine Woche zur\xfcck").toString(),children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:Object(a.jsx)(P.a,{disabled:x,onClick:function(e){e.stopPropagation(),u(d.subtract(7,"day"))},children:Object(a.jsx)(A.a,{})})})})}),Object(a.jsx)(w.V,{title:y?f:h("Zur\xfcck").toString(),children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:Object(a.jsx)(P.a,{disabled:y,onClick:function(e){e.stopPropagation(),n(N.navigate.PREVIOUS)},children:Object(a.jsx)(A.c,{})})})})}),Object(a.jsx)(w.V,{title:h("Heute").toString(),children:Object(a.jsx)(D.a,Object(o.a)(Object(o.a)({color:"default",onClick:function(e){e.stopPropagation(),n(N.navigate.TODAY)}},i),{},{children:t}))}),Object(a.jsx)(w.V,{title:C?f:h("Weiter").toString(),children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:Object(a.jsx)(P.a,{disabled:C,onClick:function(e){e.stopPropagation(),n(N.navigate.NEXT)},children:Object(a.jsx)(A.d,{})})})})}),j.isMobile&&m&&Object(a.jsx)(w.V,{title:g?f:h("Springe eine Woche weiter").toString(),children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:Object(a.jsx)(P.a,{disabled:g,onClick:function(e){e.stopPropagation(),u(d.add(7,"day"))},children:Object(a.jsx)(A.b,{})})})})})]})},M=n(163),R=function(){var e=Object(O.a)().t,t=Object(r.useContext)(v),n=t.activeView,i=t.onViewChange,o=t.calendarType,c=!Object(b.d)().isMD&&"homework"===o,s=function(e){return n===e?"primary":"default"};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(P.a,{color:s("day"),onClick:function(e){e.stopPropagation(),i("day")},children:Object(a.jsx)(M.R,{})}),Object(a.jsx)(w.V,{title:c&&e("Die Wochen-Anzeige ist bei der Hausaufgabenplan-Ansicht deaktiviert.").toString(),children:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("span",{children:Object(a.jsx)(P.a,{color:s("work_week"),disabled:c,onClick:function(e){e.stopPropagation(),i("work_week")},children:Object(a.jsx)(M.S,{})})})})})]})},E=n(75),V=n(958),I=n(514),L=n(1049),z=function(){var e=Object(r.useContext)(v),t=e.calendarType,n=e.onCalendarTypeChange,o=Object(O.a)().t,c=[["lesson",o("Stundenplan"),o("Zeige den Standard-Stundenplan")],["homework",o("Hausaufgabenheft"),o("Zeige nach wann Hausaufgaben aufgegeben wurden")]],s=Object(b.p)();return Object(a.jsx)(V.a,{control:Object(a.jsx)(T.a,{ml:1,children:Object(a.jsx)(I.a,{labelId:s,value:t,renderValue:function(e){var t=c.filter((function(t){return t[0]===e}))[0];return Object(a.jsx)(E.a,{children:t[1]})},onChange:function(e){return n(e.target.value)},children:c.map((function(e){var t=Object(i.a)(e,3),n=t[0],o=t[1],r=t[2];return Object(a.jsx)(L.a,{value:n,children:Object(a.jsxs)(T.a,{children:[Object(a.jsx)(E.a,{children:o}),Object(a.jsx)(E.a,{variant:"body2",children:r})]})},n)}))})}),label:o("Anzeigen nach..."),labelPlacement:"start"})},W=n(962),B=n(963),H=function(){var e=Object(r.useContext)(v),t=e.showFreePeriods,n=e.calendarType,i=e.onShowFreePeriodsChange,o=Object(O.a)().t,c="lesson"!==n;return Object(a.jsx)(W.a,{children:Object(a.jsx)(V.a,{control:Object(a.jsx)(B.a,{checked:t,color:"primary",onChange:function(e){return i(e.target.checked)}}),disabled:c,label:o("Freistunden anzeigen")})})},X=n(1018),Z=[1,2,3,4,5],q=function(e){var t=e.onChange,n=Object(r.useContext)(v),i=n.onDateChange,o=n.date,c=Object(O.a)().t,l=Object(r.useContext)(v),d=l.earliestDateAvailable,j=l.latestDateAvailable;return Object(a.jsxs)(y.a,{container:!0,direction:"column",spacing:2,alignItems:"center",children:[Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(E.a,{variant:"h5",component:"h1",align:"center",children:c("Springe zu einem Tag")})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(X.b,{disableToolbar:!0,variant:"static",format:"L",value:o.toDate(),minDate:null===d||void 0===d?void 0:d.toDate(),maxDate:null===j||void 0===j?void 0:j.toDate(),shouldDisableDate:function(e){return!e||!Z.includes(e.day())},onChange:function(e){if(e){var n=s()(e);i(n),t&&t(n)}}})})]})},G=Object(r.memo)(q),J=function(){var e=Object(r.useContext)(v),t=e.showDetails,n=e.onShowDetailsChange,i=e.calendarType,o=Object(O.a)().t,c="lesson"!==i;return Object(a.jsx)(W.a,{children:Object(a.jsx)(V.a,{control:Object(a.jsx)(w.V,{title:o("Die Anzeige wird detaillierter, dauert aber auch l\xe4nger um berechnet zu werden.").toString(),children:Object(a.jsx)(B.a,{checked:t,color:"primary",onChange:function(e){return n(e.target.checked)}})}),disabled:c,label:o("Details anzeigen")})})},$=function(e){var t=e.label,n=e.onNavigate,o=Object(O.a)().t,c=Object(b.d)().isMD,s=Object(r.useState)(!1),l=Object(i.a)(s,2),d=l[0],u=l[1],h=[Object(a.jsx)(R,{},"view_changer"),Object(a.jsx)(z,{},"type_changer"),Object(a.jsxs)("div",{children:[Object(a.jsx)(H,{}),Object(a.jsx)(J,{})]},"switchers")];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(y.a,{container:!0,direction:c?"row":"column",alignItems:"center",justify:"center",children:[Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(F,{label:t,onNavigate:n,onContextMenu:function(e){j.isMobile||(e.preventDefault(),u(!0))}})}),Object(a.jsx)(y.a,{item:!0,children:Object(a.jsx)(D.a,{color:"secondary",endIcon:Object(a.jsx)(A.q,{}),onClick:function(){return u(!0)},children:o("Einstellungen")})})]}),Object(a.jsxs)(C.a,{open:d,maxWidth:"md",onBackdropClick:function(){return u(!1)},children:[Object(a.jsx)(k.a,{children:o("Einstellungen")}),Object(a.jsx)(S.a,{children:c?Object(a.jsxs)(T.a,{display:"flex",flexDirection:"row",children:[Object(a.jsx)(G,{}),Object(a.jsx)(y.a,{container:!0,spacing:1,direction:"column",alignItems:"center",children:h.map((function(e){return Object(a.jsx)(y.a,{item:!0,children:e},e.key)}))})]}):Object(a.jsxs)(y.a,{container:!0,spacing:1,direction:"column",alignItems:"center",children:[h.map((function(e){return Object(a.jsx)(y.a,{item:!0,children:e},e.key)})),Object(a.jsx)(y.a,{item:!0,style:{overflow:"scroll",maxWidth:"100%"},children:Object(a.jsx)(T.a,{mt:5,children:Object(a.jsx)(G,{})})})]})}),Object(a.jsx)(_.a,{children:Object(a.jsx)(w.L,{onClick:function(){return u(!1)},children:o("Schlie\xdfen")})})]})]})},U=Object(g.a)(w.Y)((function(e){var t=e.style,n=void 0===t?{}:t,c=e.events,d=e.eventComponent,j=e.classes,u=Object(p.a)(e,["style","events","eventComponent","classes"]),h=Object(r.useContext)(v),O=h.date,m=h.activeView,f=h.onDateChange,g=Object(b.s)(),w=Object(i.a)(g,2)[1],y=Object(r.useMemo)((function(){return Object(o.a)(Object(o.a)({},n),{},{height:Math.min(2500,Math.max(800,w))})}),[n,w]),D=Object(r.useMemo)((function(){return{toolbar:$,eventWrapper:d}}),[d]),C=Object(l.j)(c),k=Object(i.a)(C,2),S=k[0],T=k[1];return Object(a.jsx)(x.a,Object(o.a)({views:["work_week","day"],view:m,style:y,min:S,max:T,localizer:l.o,className:j.root,step:30,dayLayoutAlgorithm:"no-overlap",date:O.toDate(),components:D,events:0===c.length?[]:c,onNavigate:function(e){var t=s()(e);switch(t.day()){case 6:t=Object(l.f)(t,1);break;case 0:t=Object(l.f)(t.subtract(6,"day"),5)}f(t)},onView:function(){return null}},u))})),Y=n(1052),K=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(E.a,{variant:"h6",children:Object(a.jsx)(Y.a,{})}),Object(a.jsx)(E.a,{variant:"h4",children:Object(a.jsx)(Y.a,{})})]})},Q=function(e){var t=e.style,n=Object(l.h)(null!==t&&void 0!==t?t:{});return Object(a.jsx)("div",{style:n,children:Object(a.jsx)(K,{})})},ee=Object(r.memo)(Q),te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return s()(new Date(2020,1,1,e,t,0))},ne=[[te(9),te(10)],[te(13),te(14)]],ae=function(e){var t=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ne,a=[],o=t.diff(e,"day"),r=e,c=0;c<=o;c++){var s,d=c%2===0,j=Object(f.a)(n);try{for(j.s();!(s=j.n()).done;){var u=s.value,b=Object(i.a)(u,2),h=b[0],O=b[1],m=Object(l.c)(r,h),v=Object(l.c)(r,O);a.push({start:m.add(Number(d),"hour").toDate(),end:v.add(Number(d),"hour").toDate(),title:"Laden..."})}}catch(p){j.e(p)}finally{j.f()}r=r.add(1,"day")}return a}(e.startDate,e.endDate);return Object(a.jsx)(U,{events:t,eventComponent:ee})},ie=Object(r.memo)(ae),oe=n(1006),re=n(1053),ce=n.n(re),se=function(e){var t=e.event;return Object(a.jsx)("div",{className:ce.a.wrapper,children:t.title})},le=Object(r.memo)(se),de=n(55),je=n(412),ue=n(1054),be=n.n(ue),he=function(e){var t=e.modification,n=(Object(O.a)().t,Object(de.a)()),i=Object(b.h)(t.modificationType),o=Object(r.useMemo)((function(){return{height:"100%"}}),[]);return Object(a.jsx)(w.g,{color:je.a[t.modificationType],style:o,parentTheme:n,className:be.a.wrapper,children:Object(a.jsx)(E.a,{variant:"body1",color:"textPrimary",children:i})})},Oe=Object(r.memo)(he),me=n(22),ve=n(1004),fe=n(8),pe=n(1055),xe=n.n(pe),ge=function(e){var t,n,i,o,r,c,s,d=e.homeworkCount,j=e.materialCount,u=e.lesson,b=e.modification,h=e.showWhenFreePeriod,O=e.showDetails,m=(null===b||void 0===b?void 0:b.modificationType)===fe.b.FreePeriod||(null===b||void 0===b?void 0:b.modificationType)===fe.b.SelfLearn,v=null!==(t=null===b||void 0===b||null===(n=b.newSubject)||void 0===n?void 0:n.name)&&void 0!==t?t:u.course.name,f=null!==(i=null===b||void 0===b||null===(o=b.newRoom)||void 0===o?void 0:o.place)&&void 0!==i?i:u.room.place,p=null!==(r=null===b||void 0===b||null===(c=b.newTeacher)||void 0===c?void 0:c.lastName)&&void 0!==r?r:u.course.teacher.lastName,x=d>0,g=j>0,y=(null===b||void 0===b?void 0:b.modificationType)===fe.b.RoomChange,D=null!==u.videoConferenceLink,C=[x&&Object(a.jsx)(w.w,{count:d},"homework_".concat(u.id)),g&&Object(a.jsx)(w.I,{count:j},"material_".concat(u.id)),y&&Object(a.jsx)(w.N,{},"room_".concat(u.id)),D&&Object(a.jsx)(w.X,{isActive:!0},"video_conference_".concat(u.id))].filter(Boolean);return!h&&m?null:Object(a.jsx)(ve.a,{href:Object(l.a)("/agenda/lesson/detail/:id/",{id:u.id}),children:Object(a.jsxs)(w.C,{isDisabled:m,color:u.course.subject.userRelation.color,startTime:u.startTime,endTime:u.endTime,children:[Object(a.jsx)(w.b,{badges:C}),Object(a.jsx)(w.D,{courseName:v,roomName:f,teacherName:p,className:[xe.a.wrapper,(s={},Object(me.a)(s,xe.a.isModificationAvailable,void 0!==b),Object(me.a)(s,xe.a.isReplacement,(null===b||void 0===b?void 0:b.modificationType)===fe.b.Replacement),s)],showDetails:O})]})})},we=n(138),ye=function(e){var t=e.event;return Object(a.jsx)(ve.a,{fullWidth:!0,href:Object(l.a)("/agenda/exam/detail/:id/",{id:t.id}),underline:"none",component:D.a,startIcon:Object(a.jsx)(we.b,{}),style:{color:t.course.subject.userRelation.color},size:"large",children:t.course.subject.name})},De=Object(r.memo)(ye),Ce=function(e){var t=e.showFreePeriods,n=e.showDetails,i=e.modifications,r=e.homeworks,c=e.materials;return function(e){return function(e){var t=e.event,n=e.style,i=e.showFreePeriods,r=e.showDetails,c=e.homeworks,s=e.materials,d=e.modifications,j=Object(o.a)(Object(o.a)({},Object(l.h)(null!==n&&void 0!==n?n:{},t)),{},{wordBreak:"break-all"}),u=null;switch(t.resource.type){case"lesson":var b=t.resource,h=c.filter((function(e){return e.lesson.id===b.id})).length,O=s.filter((function(e){return e.lesson.id===b.id})).length,m=d.filter((function(e){return e.lesson.id===b.id}))[0];u=Object(a.jsx)(ge,{lesson:b,materialCount:O,homeworkCount:h,modification:m,showWhenFreePeriod:i,showDetails:r});break;case"event":var v=t.resource;u=Object(a.jsx)(le,{event:v});break;case"modification":var f=t.resource;u=Object(a.jsx)(Oe,{modification:f});break;case"exam":var p=t.resource;return Object(a.jsx)(De,{event:p})}return Object(a.jsx)(oe.a,{theme:l.e,children:Object(a.jsx)("div",{style:j,children:u})})}(Object(o.a)(Object(o.a)({},e),{},{showFreePeriods:t,showDetails:n,modifications:i,homeworks:r,materials:c}))}},ke=n(30),Se=function(){var e=Object(r.useContext)(v),t=e.lessons,n=e.events,i=e.exams,c=e.showFreePeriods,s=e.showDetails,d=e.homeworks,j=e.materials,u=e.modifications,b=function(e){var t=e.lessons,n=e.events,a=e.exams,i=e.modifications,r=(null!==t&&void 0!==t?t:[]).map((function(e){return{start:Object(l.c)(e.date,e.startTime).toDate(),end:Object(l.c)(e.date,e.endTime).toDate(),title:e.course.name,allDay:!1,resource:Object(o.a)(Object(o.a)({},e),{},{type:"lesson"})}})),c=(null!==n&&void 0!==n?n:[]).map((function(e){return{start:e.startDatetime.toDate(),end:e.endDatetime.toDate(),title:e.title,allDay:e.isAllDay,resource:Object(o.a)(Object(o.a)({},e),{},{type:"event"})}})),s=(null!==i&&void 0!==i?i:[]).filter((function(e){return!(e.startDatetime.isSame(Object(l.c)(e.lesson.date,e.lesson.startTime))&&e.endDatetime.isSame(Object(l.c)(e.lesson.date,e.lesson.endTime)))})).map((function(e){return{start:e.startDatetime.toDate(),end:e.endDatetime.toDate(),title:e.lesson.course.subject.name,resource:Object(o.a)(Object(o.a)({},e),{},{type:"modification"})}})),d=(null!==a&&void 0!==a?a:[]).map((function(e){return{start:e.targetedDate.toDate(),end:e.targetedDate.toDate(),title:e.course.subject.name,allDay:!0,resource:Object(o.a)(Object(o.a)({},e),{},{type:"exam"})}}));return[].concat(Object(ke.a)(r),Object(ke.a)(c),Object(ke.a)(s),Object(ke.a)(d))}({events:n,lessons:t,exams:i});return Object(a.jsx)(U,{events:b,eventComponent:Ce({showFreePeriods:c,showDetails:s,materials:j,homeworks:d,modifications:u})})},Te=n(37),_e=n.n(Te),Ae=function(e){return function(t){return function(e){var t=e.event,n=e.style,o=Object(r.useContext)(m.b).dispatch,c=Object(r.useState)(t.resource),s=Object(i.a)(c,2),l=s[0],d=s[1];return l.lesson?Object(a.jsx)("div",{style:n,children:Object(a.jsx)(w.v,{subject:l.lesson.course.subject,information:l.information,creationDate:l.createdAt,dueDate:l.dueDate,completed:l.userRelation.completed,ignore:l.userRelation.ignore,id:l.id,onServerUpdate:function(e){d((function(t){return _e()(t,{userRelation:{$set:e}})}))}})}):(o({type:"setError",payload:{}}),null)}(Object(o.a)(Object(o.a)({},t),e))}},Pe=function(){var e=Object(r.useContext)(v),t=e.refetch,n=function(e){return e.map((function(e){return e.lesson?{title:null===e||void 0===e?void 0:e.lesson.course.subject.name,start:Object(l.c)(e.lesson.date,e.lesson.startTime).toDate(),end:Object(l.c)(e.lesson.date,e.lesson.endTime).toDate(),resource:e}:{}}))}(e.homeworks);return Object(a.jsx)(U,{events:n,eventComponent:Ae({refetch:t})})},Ne=Object(r.memo)(Pe),Fe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return Object(d.a)(Object(l.f)((null!==e&&void 0!==e?e:s()()).subtract(4,"day"),1))};t.default=function(){var e,t,n,c,f,p,x,g,w,y,D,C,k,S,T,_,A,P,N,F=Object(b.n)().date,M=Object(O.a)().t,R=Object(b.m)(),E=Object(h.C)(),V=Object(b.d)().isMD,I=Object(r.useContext)(m.b).dispatch,L=Object(b.r)(),z=L.state,W=L.update,B=Object(r.useState)((function(){return j.isMobile?"day":"work_week"})),H=Object(i.a)(B,2),X=H[0],Z=H[1],q=Object(r.useState)("lesson"),G=Object(i.a)(q,2),J=G[0],$=G[1],U=Object(r.useState)((function(){if("string"===typeof F){var e=s()(F);if(e.isValid())return e}var t=s()();return 6===t.day()||0===t.day()?Fe():s()()})),Y=Object(i.a)(U,2),K=Y[0],Q=Y[1],ee=null===(e=null===z||void 0===z||null===(t=z.timetable)||void 0===t?void 0:t.showFreePeriods)||void 0===e||e,te=null!==(n=null===z||void 0===z||null===(c=z.timetable)||void 0===c?void 0:c.showDetails)&&void 0!==n?n:!j.isMobile,ne=Fe(K),ae=function(e){return Object(d.b)(Object(l.f)(e,5))}(ne),oe={startDatetime:Object(l.i)(ne),endDatetime:Object(l.i)(ae)},re=Object(u.a)(["fetch_timetable",oe],(function(){return E(oe)}),Object(o.a)(Object(o.a)({},R),{},{onError:function(e){var t;503===(null===(t=e.response)||void 0===t?void 0:t.status)&&I({type:"setError",payload:{title:M("Stundenplan fehlt"),message:M("Dein Stundenplan wurde noch nicht geladen. Er wird im Laufe des Tages automatisch geladen, dann kannst du ihn hier sehen.")}})}})),ce=re.data,se=re.isLoading,le=re.refetch;Object(r.useEffect)((function(){V||"homework"!==J||"day"===X||Z("day")}),[J,X,V,Z]);var de=ce;if(!se&&(null===ce||void 0===ce?void 0:ce.lessons)&&ce.events){switch(J){case"lesson":N=Object(a.jsx)(Se,{});break;case"homework":N=Object(a.jsx)(Ne,{})}switch(X){case"day":de=function(e,t){var n=Object(d.a)(t).subtract(1,"millisecond"),a=Object(d.b)(t).add(1,"millisecond"),i=e.events,r=e.lessons.filter((function(e){return Object(l.c)(e.date,e.startTime).isAfter(n)&&Object(l.c)(e.date,e.endTime).isBefore(a)})),c=i.filter((function(e){return e.startDatetime.isAfter(n)&&e.endDatetime.isBefore(a)}));return Object(o.a)(Object(o.a)({},e),{},{events:c,lessons:r})}(ce,K)}}else N=Object(a.jsx)(ie,{startDate:ne,endDate:ae});return Object(a.jsx)(v.Provider,{value:{activeView:X,showFreePeriods:ee,showDetails:te,refetch:le,lessons:null!==(f=null===(p=de)||void 0===p?void 0:p.lessons)&&void 0!==f?f:[],events:null!==(x=null===(g=de)||void 0===g?void 0:g.events)&&void 0!==x?x:[],exams:null!==(w=null===(y=de)||void 0===y?void 0:y.exams)&&void 0!==w?w:[],homeworks:null!==(D=null===(C=de)||void 0===C?void 0:C.homeworks)&&void 0!==D?D:[],materials:null!==(k=null===(S=de)||void 0===S?void 0:S.materials)&&void 0!==k?k:[],modifications:null!==(T=null===(_=de)||void 0===_?void 0:_.modifications)&&void 0!==T?T:[],calendarType:J,date:K,earliestDateAvailable:null===(A=de)||void 0===A?void 0:A.earliestDateAvailable,latestDateAvailable:null===(P=de)||void 0===P?void 0:P.latestDateAvailable,onCalendarTypeChange:$,onDateChange:function(e){var t=e;switch(e.day()){case 0:t=e.subtract(2,"day");break;case 6:t=e.add(2,"day")}Q(t)},onViewChange:Z,onShowFreePeriodsChange:W.timetable.setShowFreePeriod,onShowDetailsChange:W.timetable.setShowDetails},children:N})}}}]);