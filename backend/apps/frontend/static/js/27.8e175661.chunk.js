(this["webpackJsonptabool-website"]=this["webpackJsonptabool-website"]||[]).push([[27],{1095:function(e,n,t){"use strict";t.r(n);var i=t(2),r=t(1),c=t(1001),a=t(40),s=t(20),l=t(1032),o=t(948),u=t(61),d=t(55),j=t(516),b=t(75),f=t(950),O=t(1007),h=t(1022),x=t(30),m=t(4),y=t(12),p=t(113),v=t(1014),g=t(230),k=t(373),N=t(27),S=t.n(N),P=t(15),w=t(1037);var I=function(e){return Array.isArray(e)?e:void 0===e?[]:function(e){return function(e){return"object"===typeof e&&null!==e}(e)&&"number"===typeof e.length}(e)||e instanceof Set?Array.from(e):[e]};function z(e){return"object"===typeof e&&null!==e}function F(e){return"undefined"!==typeof e}function M(e){return null===e}var D={isNumber:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isPlainObject:function(e){return null!==e&&"object"===typeof e&&e.constructor===Object},isArrayLike:function(e){return z(e)&&"number"===typeof e.length},isObject:z,isDefined:F,isUndefined:function(e){return!F(e)},isNull:M,isDefinedValue:function(e){return F(e)&&!M(e)&&!Number.isNaN(e)},isClass:function(e){return"function"===typeof e&&/^class /.test(Function.prototype.toString.call(e))},isPrimitive:function(e){if(null===e)return!0;switch(typeof e){case"string":case"number":case"symbol":case"undefined":case"boolean":return!0;default:return!1}},isPromise:function(e){if(e){var n=F(Promise)&&e instanceof Promise,t=e.then&&"function"===typeof e.then;return!(!n&&!t)}return!1},isIterable:function(e){return!(null===e||!F(e))&&("function"===typeof e[Symbol.iterator]||"function"===typeof e[Symbol.asyncIterator])},isString:function(e){return"string"===typeof e},isFunction:function(e){return"function"===typeof e}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=I(e.by),t=I(e.order),i=e.customOrders,r=e.computed;return function c(a,s){var l,o,u,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,j=t[d]||"asc";return"asc"===j||"desc"===j||i[j]?(n.length?(o=D.isDefined(a[n[d]])?a[n[d]]:r[n[d]]&&r[n[d]](a),u=D.isDefined(s[n[d]])?s[n[d]]:r[n[d]]&&r[n[d]](s)):(o=a,u=s),i&&i[j]?l=i[j].indexOf(o)-i[j].indexOf(u):o===u?l=0:D.isNull(o)&&D.isUndefined(u)?l="asc"===j?1:"desc"===j?-1:0:D.isUndefined(o)&&D.isNull(u)?l="asc"===j?-1:"desc"===j?1:0:D.isNull(o)&&D.isDefinedValue(u)?l=e.nullRank:D.isUndefined(o)&&D.isDefinedValue(u)?l=e.undefinedRank:D.isNull(u)&&D.isDefinedValue(o)?l=-e.nullRank:D.isUndefined(u)&&D.isDefinedValue(o)?l=-e.undefinedRank:(l=o<u?-1:o>u?1:0,"desc"===j&&(l*=-1)),0===l&&n[d+1]&&(l=c(a,s,d+1)),l):0}}var R=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n=Object.assign({computed:{},customOrders:{},nullRank:1,undefinedRank:1},n),e.sort(C(n)),e},A=t(1050),U=t(1082),V=t(1008),_=t(1012),E=t(1010),J=t(1044),K=t(305),L=t(361),Z=t(237),q=t.n(Z),B=t(138),G=function(e){var n,t,c,a,l,j=e.filename,f=e.id,O=e.lessonId,h=e.size,x=Object(o.a)().t,m=Object(s.r)().state,p=Object(d.a)(),v=Object(r.useState)(!1),g=Object(y.a)(v,2),k=g[0],N=g[1],S=null===j||void 0===j||null===(n=j.split)||void 0===n||null===(t=n.call(j,"."))||void 0===t||null===(c=t.pop)||void 0===c?void 0:c.call(t),w=S?u.Z[S]:L.w,I=null===m||void 0===m||null===(a=m.detailPage)||void 0===a||null===(l=a.downloadedMaterials)||void 0===l?void 0:l[f],z={opacity:I?1-p.palette.action.activatedOpacity:1};return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsxs)(V.a,{button:!0,style:z,onClick:function(){return N(!0)},children:[Object(i.jsx)(_.a,{children:Object(i.jsx)(w,{size:"1.5rem",color:"inherit"})}),Object(i.jsx)(E.a,{primary:j,secondary:Object(i.jsxs)(i.Fragment,{children:[h&&q()(h,{locale:"de"}),I&&Object(i.jsx)(u.U,{children:function(e){return Object(i.jsx)(b.a,{variant:"body2",color:"textSecondary",children:x("Zuletzt runtergeladen {{relative}}",{relative:I.from(e.add(3,"second"))})})}})]})}),Object(i.jsx)(J.a,{children:Object(i.jsx)(K.a,{size:"small",edge:"end",href:Object(P.a)("/agenda/lesson/detail/:id",{id:O}),children:Object(i.jsx)(B.d,{})})})]},f),Object(i.jsx)(u.t,{isOpen:k,materialId:f,onClose:function(){return N(!1)}})]})},H=Object(p.a)({ul:{padding:0}}),Q=function(e){var n=e.course,t=Object(o.a)().t,c=H(),u=Object(a.r)(),d=Object(s.m)(),O=Object(r.useState)(!1),h=Object(y.a)(O,2),p=h[0],N=h[1],I={courseId:n.id,pageSize:p?10:5},z=Object(w.a)(["fetch_materials_course_",I],(function(e){var n=e.pageParam;return u(I,n)}),Object(m.a)(Object(m.a)({},d),{},{getNextPageParam:function(e){return e.next}})),F=z.data,M=z.isLoading,D=z.fetchNextPage,C=z.hasNextPage,V=Object(r.useMemo)((function(){if(!F)return[];var e=F.pages.reduce((function(e,n){return[].concat(Object(x.a)(e),Object(x.a)(n.results))}),[]),n=Object(k.a)(e,{getValue:function(e){return Object(P.q)(e.addedAt,"time").toISOString()}});return Object.entries(n).map((function(e){var n=Object(y.a)(e,2),t=n[0],i=n[1];return[t,R(i,{by:"unix",order:"desc",undefinedRank:1,computed:{unix:function(e){var n,t;return null===(n=e.addedAt)||void 0===n||null===(t=n.unix)||void 0===t?void 0:t.call(n)}}})]}))}),[F]);return Object(i.jsxs)("ul",{children:[Object(i.jsx)(v.a,{inset:!1,children:Object(i.jsxs)(j.a,{py:1,display:"flex",alignItems:"center",children:[Object(i.jsx)(j.a,{mr:1,children:Object(i.jsx)(b.a,{variant:"h5",color:"textPrimary",children:n.subject.name})}),M&&Object(i.jsx)(f.a,{size:"1rem",color:"inherit"}),C&&Object(i.jsx)(U.b,{size:".5rem"})]})}),Object(i.jsx)(A.a,{children:V.map((function(e,n){var t=Object(y.a)(e,2),r=t[0],a=t[1];return Object(i.jsx)(j.a,{component:"li",mt:5*Number(Boolean(n)),children:Object(i.jsxs)("ul",{className:c.ul,children:[Object(i.jsx)(v.a,{disableSticky:!0,children:S()(r).format("ll")}),Object(i.jsx)(A.a,{children:a.map((function(e){var n;return Object(i.jsx)("div",{children:Object(i.jsx)(G,{id:e.id,filename:e.name,size:null!==(n=e.size)&&void 0!==n?n:void 0,lessonId:e.lesson})},e.id)}))})]})},r)}))}),!M&&!Object.values(V).length&&Object(i.jsx)(l.a,{severity:"info",children:t("Keine Materialien verf\xfcgbar")}),M&&Object(i.jsx)(j.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(f.a,{})}),p&&!M&&!F&&Object(i.jsx)(l.a,{severity:"error",children:t("Materialien konnten nicht geladen werden.")}),C&&Object(i.jsx)(j.a,{display:"flex",alignItems:"center",justifyContent:"center",children:Object(i.jsx)(g.a,{onClick:function(){p?D():N(!0)},children:t("Mehr laden")})})]})};n.default=function(){var e=Object(d.a)(),n=Object(u.bb)(),t=Object(o.a)().t,x=Object(a.k)(),m=Object(s.m)(),y=Object(r.useMemo)((function(){return{backgroundColor:e.palette.background.default}}),[e.palette.background.default]),p=Object(c.a)("fetch_courses",(function(){return x()}),m),v=p.data,g=p.isError,k=p.isFetching;return v?Object(i.jsx)(u.k,{children:Object(i.jsxs)(j.a,{p:2,children:[Object(i.jsx)(b.a,{variant:"h4",children:t("Materialien in deinen F\xe4chern")}),Object(i.jsx)(b.a,{variant:"body2",color:"textSecondary",children:t("Klicke auf den Fachnamen, um alle Materialien zu sehen")}),Object(i.jsxs)(j.a,{my:2,display:"flex",alignItems:"center",justifyContent:"center",children:[k&&Object(i.jsx)(f.a,{}),g&&Object(i.jsx)(l.a,{severity:"error",children:t("Es konnten keine Materialien mehr geladen werden.")})]}),Object(i.jsx)(O.a,{className:n.root,style:y,subheader:Object(i.jsx)("li",{}),children:v.results.map((function(e,n){return Object(i.jsxs)(i.Fragment,{children:[Object(i.jsx)(j.a,{component:"li",children:Object(i.jsx)(Q,{course:e})},e.id),n<Object.keys(v.results).length-1&&Object(i.jsx)(j.a,{my:2,children:Object(i.jsx)(h.a,{})})]})}))})]})}):k?Object(i.jsx)(u.G,{title:t("Dateien werden geladen")}):Object(i.jsx)(l.a,{severity:"error",children:t("Materialien konnten nicht geladen werden.")})}}}]);