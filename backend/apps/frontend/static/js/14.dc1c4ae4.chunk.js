(this["webpackJsonptabool-website"]=this["webpackJsonptabool-website"]||[]).push([[14],{1043:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return c}));var r=n(15),i=function(e){var t=e.course.name,n=Object(r.c)(e.date,e.startTime),i=Object(r.c)(e.date,e.endTime);return"".concat(t,": ").concat(n.format("LT")," - ").concat(i.format("lll"))},o=function(e){return e.name},a=function(e){return"".concat(e.firstName," ").concat(e.lastName," (").concat(e.shortName,")")},c=function(e){return e.place}},1109:function(e,t,n){"use strict";n.r(t);var r=n(2),i=n(4),o=n(12),a=n(1),c=n(1036),s=n(1001),u=n(40),l=n(61),d=n(948),b=n(361),j=n(163),f=n(1086),O=n(27),m=n.n(O),v=n(123),h=n(11),p=n(37),g=n.n(p),x=n(20),y=n(232),S=n(1011),P=n(962),w=n(513),E=n(1004),F=n(230),k=n(200),D=n(67),L=n(1043),A=n(138),R=n(15),T=n(1040),M=n(1008),B=n(1012),C=n(1010),N=n(1045),V=n(50),H=function(e){var t=e.id,n=e.allow,i=Object(d.a)().t,s=Object(u.e)(),b=Object(x.o)().addError,f=Object(V.h)(),O=Object(a.useState)(!1),m=Object(o.a)(O,2),h=m[0],p=m[1],g=Object(c.a)((function(){return s(t)}),{onError:function(e){return b(e,void 0,v.a.ErrorMutating)},onSuccess:function(){return f.goBack()}}),y=g.mutate,S=g.isLoading;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(F.a,{startIcon:Object(r.jsx)(j.E,{}),onClick:function(){return p(!0)},children:i("Einstellungen")}),Object(r.jsx)(l.e,{isOpen:h,onClose:function(){return p(!1)},children:Object(r.jsxs)(M.a,{button:!0,disabled:S||!n,onClick:y,children:[Object(r.jsx)(B.a,{children:Object(r.jsx)(j.o,{size:"1.5rem"})}),Object(r.jsx)(C.a,{primary:i("L\xf6schen")}),S&&Object(r.jsx)(N.a,{})]})})]})},I=Object(a.memo)(H);t.default=function(e){var t,n,O=e.match.params.id,p=Object(d.a)().t,M=k.d({information:k.g().nullable(),type:k.g().nullable(),isPrivate:k.a(),dueDate:k.b().min(m()(),p("Das F\xe4lligkeitsdatum kann nicht in der Vergangenheit liegen.")).nullable()}),B=Object(x.m)(),C=Object(u.S)(),N=Object(u.T)(),V=Object(u.n)(),H=Object(x.c)().onFetchError,z=Object(x.o)().addError,G=Object(a.useContext)(h.b).dispatch,J=Object(a.useState)(),$=Object(o.a)(J,2),_=$[0],q=$[1],K=Object(c.a)((function(e){return C(O,e)}),{onSuccess:q,onError:function(e){return z(e,void 0,v.a.ErrorMutating)}}).mutateAsync,Q=Object(c.a)((function(e){return N(O,e)}),{onSuccess:function(e){return q((function(t){return g()(t,{userRelation:{$set:e}})}))},onError:function(e){return z(e,void 0,v.a.ErrorMutating)}}).mutateAsync,U=Object(s.a)("fetch_homework_".concat(O),(function(){return V(O)}),Object(i.a)(Object(i.a)({},B),{},{onSuccess:q,onError:function(e){return H(e,Boolean(_),p("Diese Hausaufgabe wurde nicht gefunden"))}})),W=U.isLoading,Z=U.dataUpdatedAt,X=U.refetch,Y=U.isFetching,ee=null===_||void 0===_?void 0:_.isPrivate;if(W)return Object(r.jsx)(l.G,{title:p("Hausaufgabe wird geladen...")});if(!(null===_||void 0===_?void 0:_.lesson))return G({type:"setError",payload:{}}),null;var te=Object(l.ab)(_.lesson.course.weekdays,_.lesson.course.subject.userRelation.color);return Object(r.jsx)(l.l,{isRefreshing:Y,title:_.lesson.course.subject.name,validationSchema:M,defaultOrdering:["information","dueDate","type","isPrivate","createdAt","lesson"],relationButtons:{values:{completed:{isActive:_.userRelation.completed,icon:Object(r.jsx)(j.i,{}),title:p("Erledigt")},ignore:{isActive:_.userRelation.ignore,icon:Object(r.jsx)(j.f,{}),title:p("Ignorieren")}},onSubmit:function(e,t){var n=t.resetForm,r=t.setSubmitting;return Q(e).then((function(e){return q((function(t){return g()(t,{userRelation:{$set:e}})}))})).catch(n).finally((function(){return r(!1)}))}},refetch:X,updatedAt:m()(Z),color:_.lesson.course.subject.userRelation.color,orderingStorageName:"detail:ordering:homework",addPath:Object(R.a)("/add/homework/",void 0,{lesson:_.lesson.id,type:_.type,dueDate:Object(R.n)(_.dueDate),isPrivate:_.isPrivate}),renderTopField:function(e){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(S.a,{item:!0,children:e}),Object(r.jsx)(S.a,{item:!0,children:Object(r.jsx)(I,{id:O,allow:Boolean(ee)})})]})},data:{information:{information:_.information,title:p("Information"),icon:Object(r.jsx)(j.y,{}),renderField:ee&&function(e){var t=e.getFieldProps;return Object(r.jsx)(D.b,Object(i.a)(Object(i.a)({},t("information")),{},{fullWidth:!0,multiline:!0,variant:"outlined",component:y.b}))}},type:{icon:Object(r.jsx)(f.a,{}),title:p("Typ"),information:null!==(t=_.type)&&void 0!==t?t:"",disableShowMore:!0,renderField:ee&&function(e){var t=e.getFieldProps;return Object(r.jsx)(D.b,Object(i.a)(Object(i.a)({},t("type")),{},{type:"text",component:l.z}))}},isPrivate:{icon:_.isPrivate?Object(r.jsx)(j.C,{}):Object(r.jsx)(j.D,{}),title:p("Privat"),nativeValue:_.isPrivate,information:Object(r.jsx)(l.c,{value:_.isPrivate}),helperText:p("Hausaufgaben k\xf6nnen nicht mehr privat gestellt werden, sobald sie einmal f\xfcr den Kurs ver\xf6ffentlicht wurden."),disableShowMore:!0,renderField:ee&&function(e){var t,n=e.values,o=e.errors,a=e.setFieldValue,c=e.helperText,s=e.getFieldProps;return Object(r.jsxs)(P.a,{children:[Object(r.jsx)(D.b,Object(i.a)(Object(i.a)({},s("isPrivate")),{},{type:"checkbox",component:y.a,checked:n.isPrivate,Label:{label:p("Privat f\xfcr mich")},onChange:function(e){return a("isPrivate",e.target.checked)}})),Object(r.jsx)(w.a,{error:Boolean(o.isPrivate),children:null!==(t=o.isPrivate)&&void 0!==t?t:c})]})}},dueDate:{icon:function(e){return e?function(e,t){if(t)return Object(r.jsx)(b.Q,{});var n=m()(),i=e.diff(n,"day");return i<0?Object(r.jsx)(b.E,{}):i>7?Object(r.jsx)(b.G,{}):Object(r.jsx)(b.F,{})}(e,Boolean(_.dueDate&&e.isSame(_.dueDate))||!(_.userRelation.ignore||_.userRelation.completed)):null},title:p("F\xe4lligkeitsdatum"),nativeValue:_.dueDate,information:null===(n=_.dueDate)||void 0===n?void 0:n.format("LLL"),isEqual:function(e,t){var n;return null===e||void 0===e||null===(n=e.isSame)||void 0===n?void 0:n.call(e,t)},disableShowMore:!0,renderField:ee&&function(e){var t=e.getFieldProps;return Object(r.jsx)(D.b,Object(i.a)(Object(i.a)({},t("dueDate")),{},{type:"text",component:T.b,renderDay:te}))}},createdAt:{icon:Object(r.jsx)(b.p,{}),title:p("Einstellungsdatum"),information:_.createdAt.format("LLL"),disableShowMore:!0},lesson:{icon:Object(r.jsx)(A.d,{}),title:p("Stunde"),information:Object(L.a)(_.lesson),disableShowMore:!0,helperText:Object(r.jsx)(E.a,{underline:"none",component:F.a,href:Object(R.a)("/agenda/lesson/detail/:id/",{id:_.lesson.id}),children:p("Zur Stunde")})}},onSubmit:function(e,t){var n=t.setErrors,r=t.setSubmitting;return K(e).then(q).catch((function(e){var t;return n(null===(t=e.response)||void 0===t?void 0:t.data)})).finally((function(){return r(!1)}))}})}}}]);