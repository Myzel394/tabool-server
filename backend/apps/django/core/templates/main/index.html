{% load static i18n %}

{% with constants.names.PROJECT_NAME as project_name %}
    <!DOCTYPE html>
    <html lang="de">
        <head>
            <title>{{ project_name }}</title>
            <style>
                @font-face {
                    font-family: "Quicksand";
                    src: url("{% static "fonts/Quicksand.ttf" %}") format("truetype");
                }
            </style>
            <link rel="stylesheet" href="{% static 'index.css' %}">
            <link rel="stylesheet" href="{% static 'fontawesome/all.min.css' %}">
            <meta name="viewport" content="width=device-width, initial-scale=1">
        </head>
        <body>
            <div class="container">
                <h1>{{ project_name }}</h1>
                <div class="advantages">
                    <div class="advantage">
                        <i class="fas fa-comment-alt"></i>
                        <p>
                            {% translate "Benachrichtigung bei Änderungen" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-plane"></i>
                        <p>
                            {% translate "Offline verfügbar" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-shipping-fast"></i>
                        <p>
                            {% translate "Superschnelle App" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-mobile"></i>
                        <p>
                            {% translate "Sauwenig mobile Daten" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-eye-slash"></i>
                        <p>
                            {% translate "Kein Ausspionieren mehr möglich" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-user-lock"></i>
                        <p>
                            {% translate "Sicheres Speichern der Daten" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-sticky-note"></i>
                        <p>
                            {% translate "Hausaufgaben einfach verwalten" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-clock"></i>
                        <p>
                            {% translate "Materialien verzögert hochladen" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-bolt"></i>
                        <p>
                            {% translate "Effizient dank neuester Technologie" %}
                        </p>
                    </div>
                    <div class="advantage">
                        <i class="fas fa-thumbs-up"></i>
                        <p>
                            {% translate "Einfach zu benutzen" %}
                        </p>
                    </div>
                </div>
                <div class="action">
                    <details>
                        <summary>
                            {% blocktrans %}
                                {{ project_name }} runterladen
                            {% endblocktrans %}
                        </summary>
                        <div>
                            <p>
                                {% blocktrans %}
                                    {{ project_name }} kann ganz einfach über den Browser installiert werden.
                                                       Folge dazu diesen wenigen Schritten:
                                {% endblocktrans %}
                            </p>
                            <ol>
                                <li id="use_chrome">
                                    <i class="fab fa-chrome"></i>
                                    <a
                                            class="download_chrome_desktop"
                                            href="https://www.google.com/chrome/"
                                            target="_blank"
                                            ref="noopener noreferrer"
                                            id="use_chrome_anchor"
                                    >
                                        {% translate "Lade dir Chrome herunter" %}
                                    </a>
                                </li>
                                <li id="install_via_desktop">
                                    <a href="/app">
                                        {% translate "Du kannst auf deinem Computer direkt auf die App zugreifen." %}
                                    </a>
                                </li>
                                <li id="install_via_mobile">
                                    <p>
                                        <a href="/app">
                                            {% translate "Öffne die App," %}
                                        </a>
                                        {% translate 'tippe rechts neben der Suchleiste auf die drei Punkte und installiere die App indem du auf "Zum Startbildschirm hinzufügen" tippst.' %}
                                    </p>
                                </li>
                            </ol>
                        </div>
                    </details>
                </div>
            </div>
            <script async>
                const isChrome = () => {
                    const isChromium = window.chrome;
                    const winNav = window.navigator;
                    const vendorName = winNav.vendor;
                    const isOpera = typeof window.opr !== "undefined";
                    const isIEedge = winNav.userAgent.indexOf("Edge") > -1;

                    return (
                        isChromium !== null &&
                        typeof isChromium !== "undefined" &&
                        vendorName === "Google Inc." &&
                        isOpera === false &&
                        isIEedge === false
                    )
                };
                const isIOS = () => {
                    return [
                        'iPad Simulator',
                        'iPhone Simulator',
                        'iPod Simulator',
                        'iPad',
                        'iPhone',
                        'iPod'
                    ].includes(navigator.platform) || (navigator.userAgent.includes("Mac") && "ontouchend" in document)
                };
                const isAndroid = () => /(android)/i.test(navigator.userAgent);
                const isMobile = () => /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) && window.innerWidth < 1200;

                if (!isChrome()) {
                    let url;

                    if (isIOS()) {
                        url = "https://apps.apple.com/us/app/google-chrome/id535886823";
                    } else if (isAndroid()) {
                        url = "https://play.google.com/store/apps/details?id=com.android.chrome";
                    } else {
                        url = "https://www.google.com/chrome/";
                    }

                    document.getElementById("use_chrome_anchor").href = url;
                } else {
                    document.getElementById("use_chrome").remove();
                }

                if (isMobile()) {
                    document.getElementById("install_via_desktop").remove();
                } else {
                    document.getElementById("install_via_mobile").remove();
                }
            </script>
        </body>
    </html>
{% endwith %}